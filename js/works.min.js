'use strict';

(function () {
  /* ********  CONSTS   ******** */
  var TYPES = {
    new: "New!",
    underDevelopment: 'Under Development',
    upgraded: "Upgraded!"
  };

  /* ******** VARIABLES ******** */
  // HTMLElements
  var template = document.querySelector('#project').content.querySelector('.project');
  var container = document.querySelector('.works');
  // Other variables

  /* ********  EXPORT   ******** */
  /* ******** FUNCTIONS ******** */
  // addEventListener functions
  // Other functions

  var createElement = function (tagname, classes, text) {
    var element = document.createElement(tagname);

    if (classes) {
      classes.forEach(className => {
        element.classList.add(className);
      });
    }

    if (text)
      element.textContent = text;

    return element;
  };

  /**
   * @param {object} data - create new project
   * @param {number} index - number of project
   * @returns new HTMLElement
   */
  var createProject = function (data, index) {
    var project = template.cloneNode(true);
    var number = index % 3;

    if (number === 1 || number === 2)
      project.classList.add('project--half');

    if (number === 1 && index === window.PROJECTS.length - 1) // check is last and half
      project.classList.remove('project--half');

    if (data.type) {
      project.querySelector('.project__type').textContent = TYPES[data.type];
      project.querySelector('.project__type').classList.add('project__type--' + data.type);
    }

    if (data.textColor)
      project.querySelector('.project__hover').style.color = data.textColor;

    if (data.stroke)
      project.querySelector('.project__hover').style.textShadow = data.stroke;

    if (data.type === 'underDevelopment')
      project.querySelector('.project__link').href = 'javascript://0';
    else
      project.querySelector('.project__link').href = 'pages/' + data.location + '/';

    project.querySelector('source:first-of-type').srcset = "img/works/" + data.img + ".webp 1x, img/works/" + data.img + "@2x.webp 2x";
    project.querySelector('source:last-of-type').srcset = "img/works/" + data.img + ".jpg 1x, img/works/" + data.img + "@2x.jpg 2x";
    project.querySelector('img').src = "img/works/" + data.img + ".jpg";
    project.querySelector('img').alt = data.name;


    project.querySelector('.project__title').textContent = data.name;
    project.querySelector('.project__description').textContent = data.description;


    return project;
  };

  /* ********   CODE   ******** */
  var fragment = document.createDocumentFragment();

  window.PROJECTS.forEach((element, i) => {
    var project = createProject(element, i);
    fragment.appendChild(project);
  });

  fragment.appendChild(createElement('h3', ['works__tag'], '</projects>'));
  container.appendChild(fragment);
})();

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiIiwic291cmNlcyI6WyJ3b3Jrcy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbihmdW5jdGlvbiAoKSB7XG4gIC8qICoqKioqKioqICBDT05TVFMgICAqKioqKioqKiAqL1xuICB2YXIgVFlQRVMgPSB7XG4gICAgbmV3OiBcIk5ldyFcIixcbiAgICB1bmRlckRldmVsb3BtZW50OiAnVW5kZXIgRGV2ZWxvcG1lbnQnLFxuICAgIHVwZ3JhZGVkOiBcIlVwZ3JhZGVkIVwiXG4gIH07XG5cbiAgLyogKioqKioqKiogVkFSSUFCTEVTICoqKioqKioqICovXG4gIC8vIEhUTUxFbGVtZW50c1xuICB2YXIgdGVtcGxhdGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcHJvamVjdCcpLmNvbnRlbnQucXVlcnlTZWxlY3RvcignLnByb2plY3QnKTtcbiAgdmFyIGNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy53b3JrcycpO1xuICAvLyBPdGhlciB2YXJpYWJsZXNcblxuICAvKiAqKioqKioqKiAgRVhQT1JUICAgKioqKioqKiogKi9cbiAgLyogKioqKioqKiogRlVOQ1RJT05TICoqKioqKioqICovXG4gIC8vIGFkZEV2ZW50TGlzdGVuZXIgZnVuY3Rpb25zXG4gIC8vIE90aGVyIGZ1bmN0aW9uc1xuXG4gIHZhciBjcmVhdGVFbGVtZW50ID0gZnVuY3Rpb24gKHRhZ25hbWUsIGNsYXNzZXMsIHRleHQpIHtcbiAgICB2YXIgZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQodGFnbmFtZSk7XG5cbiAgICBpZiAoY2xhc3Nlcykge1xuICAgICAgY2xhc3Nlcy5mb3JFYWNoKGNsYXNzTmFtZSA9PiB7XG4gICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LmFkZChjbGFzc05hbWUpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgaWYgKHRleHQpXG4gICAgICBlbGVtZW50LnRleHRDb250ZW50ID0gdGV4dDtcblxuICAgIHJldHVybiBlbGVtZW50O1xuICB9O1xuXG4gIC8qKlxuICAgKiBAcGFyYW0ge29iamVjdH0gZGF0YSAtIGNyZWF0ZSBuZXcgcHJvamVjdFxuICAgKiBAcGFyYW0ge251bWJlcn0gaW5kZXggLSBudW1iZXIgb2YgcHJvamVjdFxuICAgKiBAcmV0dXJucyBuZXcgSFRNTEVsZW1lbnRcbiAgICovXG4gIHZhciBjcmVhdGVQcm9qZWN0ID0gZnVuY3Rpb24gKGRhdGEsIGluZGV4KSB7XG4gICAgdmFyIHByb2plY3QgPSB0ZW1wbGF0ZS5jbG9uZU5vZGUodHJ1ZSk7XG4gICAgdmFyIG51bWJlciA9IGluZGV4ICUgMztcblxuICAgIGlmIChudW1iZXIgPT09IDEgfHwgbnVtYmVyID09PSAyKVxuICAgICAgcHJvamVjdC5jbGFzc0xpc3QuYWRkKCdwcm9qZWN0LS1oYWxmJyk7XG5cbiAgICBpZiAobnVtYmVyID09PSAxICYmIGluZGV4ID09PSB3aW5kb3cuUFJPSkVDVFMubGVuZ3RoIC0gMSkgLy8gY2hlY2sgaXMgbGFzdCBhbmQgaGFsZlxuICAgICAgcHJvamVjdC5jbGFzc0xpc3QucmVtb3ZlKCdwcm9qZWN0LS1oYWxmJyk7XG5cbiAgICBpZiAoZGF0YS50eXBlKSB7XG4gICAgICBwcm9qZWN0LnF1ZXJ5U2VsZWN0b3IoJy5wcm9qZWN0X190eXBlJykudGV4dENvbnRlbnQgPSBUWVBFU1tkYXRhLnR5cGVdO1xuICAgICAgcHJvamVjdC5xdWVyeVNlbGVjdG9yKCcucHJvamVjdF9fdHlwZScpLmNsYXNzTGlzdC5hZGQoJ3Byb2plY3RfX3R5cGUtLScgKyBkYXRhLnR5cGUpO1xuICAgIH1cblxuICAgIGlmIChkYXRhLnRleHRDb2xvcilcbiAgICAgIHByb2plY3QucXVlcnlTZWxlY3RvcignLnByb2plY3RfX2hvdmVyJykuc3R5bGUuY29sb3IgPSBkYXRhLnRleHRDb2xvcjtcblxuICAgIGlmIChkYXRhLnN0cm9rZSlcbiAgICAgIHByb2plY3QucXVlcnlTZWxlY3RvcignLnByb2plY3RfX2hvdmVyJykuc3R5bGUudGV4dFNoYWRvdyA9IGRhdGEuc3Ryb2tlO1xuXG4gICAgaWYgKGRhdGEudHlwZSA9PT0gJ3VuZGVyRGV2ZWxvcG1lbnQnKVxuICAgICAgcHJvamVjdC5xdWVyeVNlbGVjdG9yKCcucHJvamVjdF9fbGluaycpLmhyZWYgPSAnamF2YXNjcmlwdDovLzAnO1xuICAgIGVsc2VcbiAgICAgIHByb2plY3QucXVlcnlTZWxlY3RvcignLnByb2plY3RfX2xpbmsnKS5ocmVmID0gJ3BhZ2VzLycgKyBkYXRhLmxvY2F0aW9uICsgJy8nO1xuXG4gICAgcHJvamVjdC5xdWVyeVNlbGVjdG9yKCdzb3VyY2U6Zmlyc3Qtb2YtdHlwZScpLnNyY3NldCA9IFwiaW1nL3dvcmtzL1wiICsgZGF0YS5pbWcgKyBcIi53ZWJwIDF4LCBpbWcvd29ya3MvXCIgKyBkYXRhLmltZyArIFwiQDJ4LndlYnAgMnhcIjtcbiAgICBwcm9qZWN0LnF1ZXJ5U2VsZWN0b3IoJ3NvdXJjZTpsYXN0LW9mLXR5cGUnKS5zcmNzZXQgPSBcImltZy93b3Jrcy9cIiArIGRhdGEuaW1nICsgXCIuanBnIDF4LCBpbWcvd29ya3MvXCIgKyBkYXRhLmltZyArIFwiQDJ4LmpwZyAyeFwiO1xuICAgIHByb2plY3QucXVlcnlTZWxlY3RvcignaW1nJykuc3JjID0gXCJpbWcvd29ya3MvXCIgKyBkYXRhLmltZyArIFwiLmpwZ1wiO1xuICAgIHByb2plY3QucXVlcnlTZWxlY3RvcignaW1nJykuYWx0ID0gZGF0YS5uYW1lO1xuXG5cbiAgICBwcm9qZWN0LnF1ZXJ5U2VsZWN0b3IoJy5wcm9qZWN0X190aXRsZScpLnRleHRDb250ZW50ID0gZGF0YS5uYW1lO1xuICAgIHByb2plY3QucXVlcnlTZWxlY3RvcignLnByb2plY3RfX2Rlc2NyaXB0aW9uJykudGV4dENvbnRlbnQgPSBkYXRhLmRlc2NyaXB0aW9uO1xuXG5cbiAgICByZXR1cm4gcHJvamVjdDtcbiAgfTtcblxuICAvKiAqKioqKioqKiAgIENPREUgICAqKioqKioqKiAqL1xuICB2YXIgZnJhZ21lbnQgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XG5cbiAgd2luZG93LlBST0pFQ1RTLmZvckVhY2goKGVsZW1lbnQsIGkpID0+IHtcbiAgICB2YXIgcHJvamVjdCA9IGNyZWF0ZVByb2plY3QoZWxlbWVudCwgaSk7XG4gICAgZnJhZ21lbnQuYXBwZW5kQ2hpbGQocHJvamVjdCk7XG4gIH0pO1xuXG4gIGZyYWdtZW50LmFwcGVuZENoaWxkKGNyZWF0ZUVsZW1lbnQoJ2gzJywgWyd3b3Jrc19fdGFnJ10sICc8L3Byb2plY3RzPicpKTtcbiAgY29udGFpbmVyLmFwcGVuZENoaWxkKGZyYWdtZW50KTtcbn0pKCk7XG4iXSwiZmlsZSI6IndvcmtzLmpzIn0=
