'use strict';

(function () {
  /* ********  CONSTS   ******** */
  /* ******** VARIABLES ******** */
  // HTMLElements
  var images = document.images;
  var preloader = document.querySelector('.preloader');

  // Other variables
  var imagesTotalCount = images.length;
  var imagesLoadedCount = 0;

  /* ********  EXPORT   ******** */
  /* ******** FUNCTIONS ******** */
  // addEventListener functions
  var imageLoaded = function () {
    imagesLoadedCount++;
    preloader.style.width = Math.ceil((100 / imagesTotalCount) * imagesLoadedCount) + '%';

    if (imagesLoadedCount >= imagesTotalCount) {
      setTimeout(function () {
        preloader.classList.add('preloader--done');
      }, 1000);
    }
  };

  // Other functions
  /* ********   CODE   ******** */

  if (imagesTotalCount <= 0) {
    preloader.style.width = '100%';
    setTimeout(function () {
      preloader.classList.add('preloader--done');
    }, 1000);
  } else {
    for (let i = 0; i < imagesTotalCount; i++) {
      var imageClone = new Image();
      imageClone.addEventListener('load', imageLoaded);
      imageClone.addEventListener('error', imageLoaded);
      imageClone.src = images[i].src;
    }
  }
})();

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiIiwic291cmNlcyI6WyJwcmVsb2FkZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG4oZnVuY3Rpb24gKCkge1xuICAvKiAqKioqKioqKiAgQ09OU1RTICAgKioqKioqKiogKi9cbiAgLyogKioqKioqKiogVkFSSUFCTEVTICoqKioqKioqICovXG4gIC8vIEhUTUxFbGVtZW50c1xuICB2YXIgaW1hZ2VzID0gZG9jdW1lbnQuaW1hZ2VzO1xuICB2YXIgcHJlbG9hZGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByZWxvYWRlcicpO1xuXG4gIC8vIE90aGVyIHZhcmlhYmxlc1xuICB2YXIgaW1hZ2VzVG90YWxDb3VudCA9IGltYWdlcy5sZW5ndGg7XG4gIHZhciBpbWFnZXNMb2FkZWRDb3VudCA9IDA7XG5cbiAgLyogKioqKioqKiogIEVYUE9SVCAgICoqKioqKioqICovXG4gIC8qICoqKioqKioqIEZVTkNUSU9OUyAqKioqKioqKiAqL1xuICAvLyBhZGRFdmVudExpc3RlbmVyIGZ1bmN0aW9uc1xuICB2YXIgaW1hZ2VMb2FkZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgaW1hZ2VzTG9hZGVkQ291bnQrKztcbiAgICBwcmVsb2FkZXIuc3R5bGUud2lkdGggPSBNYXRoLmNlaWwoKDEwMCAvIGltYWdlc1RvdGFsQ291bnQpICogaW1hZ2VzTG9hZGVkQ291bnQpICsgJyUnO1xuXG4gICAgaWYgKGltYWdlc0xvYWRlZENvdW50ID49IGltYWdlc1RvdGFsQ291bnQpIHtcbiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICBwcmVsb2FkZXIuY2xhc3NMaXN0LmFkZCgncHJlbG9hZGVyLS1kb25lJyk7XG4gICAgICB9LCAxMDAwKTtcbiAgICB9XG4gIH07XG5cbiAgLy8gT3RoZXIgZnVuY3Rpb25zXG4gIC8qICoqKioqKioqICAgQ09ERSAgICoqKioqKioqICovXG5cbiAgaWYgKGltYWdlc1RvdGFsQ291bnQgPD0gMCkge1xuICAgIHByZWxvYWRlci5zdHlsZS53aWR0aCA9ICcxMDAlJztcbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgIHByZWxvYWRlci5jbGFzc0xpc3QuYWRkKCdwcmVsb2FkZXItLWRvbmUnKTtcbiAgICB9LCAxMDAwKTtcbiAgfSBlbHNlIHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGltYWdlc1RvdGFsQ291bnQ7IGkrKykge1xuICAgICAgdmFyIGltYWdlQ2xvbmUgPSBuZXcgSW1hZ2UoKTtcbiAgICAgIGltYWdlQ2xvbmUuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsIGltYWdlTG9hZGVkKTtcbiAgICAgIGltYWdlQ2xvbmUuYWRkRXZlbnRMaXN0ZW5lcignZXJyb3InLCBpbWFnZUxvYWRlZCk7XG4gICAgICBpbWFnZUNsb25lLnNyYyA9IGltYWdlc1tpXS5zcmM7XG4gICAgfVxuICB9XG59KSgpO1xuIl0sImZpbGUiOiJwcmVsb2FkZXIuanMifQ==
